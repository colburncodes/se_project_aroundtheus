!function(){"use strict";function e(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t=class{constructor(t,n){e(this,"_showInputError",(e=>{const t=document.querySelector(`.${e.id}-error`);t.textContent=e.validationMessage,t.classList.add(this._settings.errorClass),e.classList.add(this._settings.inputErrorClass)})),e(this,"_hideInputError",(e=>{const t=document.querySelector(`.${e.id}-error`);t.textContent="",e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass)})),e(this,"_checkInputValidity",((e,t)=>{e.validity.valid?this._hideInputError(e,t):this._showInputError(e,t)})),e(this,"_checkFormValidity",(()=>[...this._formElement.querySelectorAll(this._settings.inputSelector)].every((e=>e.validity.valid)))),e(this,"_toggleButtonState",(()=>{const e=this._checkFormValidity(),t=this._formElement.querySelector(this._settings.submitButtonSeletor);e?(t.classList.remove(this._settings.inactiveButtonClass),t.removeAttribute("disabled")):(t.setAttribute("disabled","true"),t.classList.add(this._settings.inactiveButtonClass))})),this._formElement=t,this._settings=n}enableValidation(){Array.from(document.querySelectorAll(this._settings.formSelector)).forEach((e=>{e.addEventListener("submit",(function(e){e.preventDefault()}));const t=[...e.querySelectorAll(this._settings.inputSelector)];this._toggleButtonState(),e.addEventListener("reset",(()=>{setTimeout((()=>{this._toggleButtonState()}),0)})),t.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e,this._settings),this._toggleButtonState()}))}))}))}};function n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=class{constructor(e){n(this,"_handleCloseButton",(()=>{this.closeModal()})),n(this,"_handleEscapePopup",(e=>{"Escape"===e.key&&this.closeModal()})),n(this,"_handleModalOverlay",(e=>{e.target.classList.contains(".modal")&&this.closeModal()})),this._popupElement=document.querySelector(`${e}`)}openModal(){this._popupElement.classList.add("modal__open"),document.addEventListener("keyup",this._handleEscapePopup)}closeModal(){this._popupElement.classList.remove("modal__open"),document.removeEventListener("keyup",this._handleEscapePopup)}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal__open")&&this.closeModal(),e.target.classList.contains("modal__close")&&this.closeModal()}))}},r=class extends i{constructor(e){let{popupSelector:t,handleFormSubmit:n}=e;super(t),this._modalForm=this._popupElement.querySelector(".modal__form"),this._inputs=this._modalForm.querySelectorAll(".modal__input"),this._handleFormSubmit=n}_getInputValues(){return this._formValues={},this._inputs.forEach((e=>this._formValues[e.name]=e.value)),this._formValues}setEventListeners(){super.setEventListeners(),this._modalForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}closeModal(){this._modalForm.reset(),super.closeModal()}};const o={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSeletor:".modal__save-button",inactiveButtonClass:"modal__button-disabled",inputErrorClass:"modal__input-error",errorClass:"modal__error_visible"},s=document.querySelector(".modal__form-create"),l=document.querySelector(".profile__add-button"),a=document.querySelector(".profile__edit-button"),c=document.querySelector(".modal__input-profile-name"),u=document.querySelector(".modal__input-profile-description"),d=document.querySelector("#modal__edit"),m=document.querySelector("#modal__create"),_=new class extends i{open(e){let{name:t,link:n}=e;this._imageElement=document.querySelector("#image-modal"),super.setEventListeners();const i=this._imageElement.querySelector(".modal__preview-image"),r=this._imageElement.querySelector(".modal__caption");i.src=n,i.alt=t,r.textContent=t,super.openModal()}}("#image-modal"),h=new class{constructor(e,t){this._nameElement=document.querySelector(e),this._descriptionElement=document.querySelector(t)}getUserInfo(){return{name:this._nameElement.textContent,role:this._descriptionElement.textContent}}setUserInfo(e){let{name:t,description:n}=e;this._nameElement.textContent=t,this._descriptionElement.textContent=n}}(".profile__title",".profile__description"),p=new t(d,o),f=new t(m,o),v=e=>{const t=new class{constructor(e,t){let{data:n,handleImageClick:i}=e;var r,o,s;r=this,s=()=>this._element.querySelector(".card__like-button").classList.toggle("card__like-active"),(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o="_handleLikeIcon"))in r?Object.defineProperty(r,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[o]=s,this._name=n.name,this._link=n.link,this._cardSelector=t,this._handleImageClick=i}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_handleDeleteCard(){this._element.remove(),this._element=null}_setEventListeners(){this._element.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteCard())),this._element.querySelector(".card__like-button").addEventListener("click",(()=>this._handleLikeIcon())),this._element.querySelector(".card__image").addEventListener("click",(()=>this._handleImageClick({name:this._name,src:this._link})))}generateCard(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".card__image"),t=this._element.querySelector(".card__label-text");return e.src=this._link,e.alt=this._name,t.textContent=this._name,this._element}}({data:e,handleImageClick:()=>{_.open(e)}},"#card-template");g.addItem(t.generateCard())};l.addEventListener("click",(()=>{b.openModal()}));const b=new r({popupSelector:"#modal__create",handleFormSubmit:e=>{v(e),s.reset(),b.closeModal()}});a.addEventListener("click",(()=>{const{name:e,role:t}=h.getUserInfo();c.value=e,u.value=t,y.openModal()}));const y=new r({popupSelector:"#modal__edit",handleFormSubmit:e=>{h.setUserInfo(e),y.closeModal()}}),g=new class{constructor(e,t){let{items:n,renderer:i}=e;this._items=n,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Venice Beach",link:"https://images.unsplash.com/photo-1516754075264-66d52acb23b6?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OHx8dmVuaWNlJTIwYmVhY2h8ZW58MHx8MHx8&auto=format&fit=crop&w=400&q=60"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Santa Monica",link:"https://images.unsplash.com/photo-1601394025790-b95533df1241?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8cGNofGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=400&q=60"},{name:"Deception Pass",link:"https://images.unsplash.com/photo-1643897000114-d17674311088?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8ZGVjZXB0aW9uJTIwcGFzc3xlbnwwfHwwfHw%3D&auto=format&fit=crop&w=400&q=60"},{name:"Grand Canyon National Park",link:"https://images.unsplash.com/photo-1456425712190-0dd8c2b00156?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8Z3JhbmQlMjBjYW55b24lMjBuYXRpb25hbCUyMHBhcmt8ZW58MHx8MHx8&auto=format&fit=crop&w=500&q=60"},{name:"Miami, Florida",link:"https://images.unsplash.com/photo-1533106497176-45ae19e68ba2?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8bWlhbWl8ZW58MHx8MHx8&auto=format&fit=crop&w=500&q=60"}],renderer:v},".cards__list");y.setEventListeners(),b.setEventListeners(),_.setEventListeners(),g.renderItems(),p.enableValidation(),f.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QlcsZUMwQlhXLGlCQUFtQnVDLElBQ2pCYixFQUFTTyxZQUFZTSxHQUNyQnVCLEVBQWN4RSxZQUFZLElBSXhCb0UsRUFBbUIsSUl6RXpCLE1BQ0VqSCxZQUFZLEVBQXFCc0gsR0FBbUIsSUFBeEMsTUFBRUMsRUFBSyxTQUFFQyxHQUFVLEVBQzdCNUcsS0FBSzZHLE9BQVNGLEVBQ2QzRyxLQUFLOEcsVUFBWUYsRUFDakI1RyxLQUFLK0csV0FBYXRILFNBQVNDLGNBQWNnSCxFQUMzQyxDQUVBTSxjQUNFaEgsS0FBSzZHLE9BQU9yRixTQUFTeUYsSUFDbkJqSCxLQUFLOEcsVUFBVUcsRUFBSyxHQUV4QixDQUVBWCxRQUFRVyxHQUNOakgsS0FBSytHLFdBQVdHLFFBQVFELEVBQzFCLEdKMkRBLENBQ0VOLE1EM0V3QixDQUMxQixDQUNFekQsS0FBTSxlQUNOYSxLQUFNLGlMQUVSLENBQ0ViLEtBQU0saUJBQ05hLEtBQU0sMERBRVIsQ0FDRWIsS0FBTSxlQUNOYSxLQUFNLHlLQUVSLENBQ0ViLEtBQU0saUJBQ05hLEtBQU0sdUxBRVIsQ0FDRWIsS0FBTSw2QkFDTmEsS0FBTSx5TUFFUixDQUNFYixLQUFNLGlCQUNOYSxLQUFNLHNLQ3FETjZDLFNBQVUzQixHRHRDRSxnQkMyQ2hCd0IsRUFBY2hFLG9CQUNkOEQsRUFBYTlELG9CQUNib0IsRUFBV3BCLG9CQUVYNEQsRUFBaUJXLGNBQ2pCbEMsRUFBa0IxRCxtQkFDbEI0RCxFQUFvQjVELGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoZm9ybUVsZW1lbnQsIHNldHRpbmdzKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICB9O1xuXG4gIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xuICB9O1xuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXQsIHNldHRpbmdzKSA9PiB7XG4gICAgaWYgKGlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCwgc2V0dGluZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCwgc2V0dGluZ3MpO1xuICAgIH1cbiAgfTtcblxuICBfY2hlY2tGb3JtVmFsaWRpdHkgPSAoKSA9PiB7XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gW1xuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKSxcbiAgICBdO1xuICAgIHJldHVybiBpbnB1dExpc3QuZXZlcnkoKGlucHV0KSA9PiBpbnB1dC52YWxpZGl0eS52YWxpZCk7XG4gIH07XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IGlzVmFsaWQgPSB0aGlzLl9jaGVja0Zvcm1WYWxpZGl0eSgpO1xuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxldG9yXG4gICAgKTtcbiAgICBpZiAoaXNWYWxpZCkge1xuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICBidXR0b24ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7XG4gICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9XG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmZvcm1TZWxlY3RvcilcbiAgICApO1xuXG4gICAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgaW5wdXRzID0gW1xuICAgICAgICAuLi5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpLFxuICAgICAgXTtcblxuICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCAoKSA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgIH0sIDApOyAvLyBpdOKAmXMgZW5vdWdoIHRvIHB1dCAwIG1zIGhlcmVcbiAgICAgIH0pO1xuXG4gICAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQsIHRoaXMuX3NldHRpbmdzKTtcbiAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAke3BvcHVwU2VsZWN0b3J9YCk7XG4gIH1cblxuICBvcGVuTW9kYWwoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9fb3BlblwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjYXBlUG9wdXApO1xuICB9XG5cbiAgY2xvc2VNb2RhbCgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX19vcGVuXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NhcGVQb3B1cCk7XG4gIH1cblxuICBfaGFuZGxlQ2xvc2VCdXR0b24gPSAoKSA9PiB7XG4gICAgdGhpcy5jbG9zZU1vZGFsKCk7XG4gIH07XG5cbiAgX2hhbmRsZUVzY2FwZVBvcHVwID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKTtcbiAgICB9XG4gIH07XG5cbiAgX2hhbmRsZU1vZGFsT3ZlcmxheSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCIubW9kYWxcIikpIHtcbiAgICAgIHRoaXMuY2xvc2VNb2RhbCgpO1xuICAgIH1cbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fb3BlblwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlTW9kYWwoKTtcbiAgICAgIH1cbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlTW9kYWwoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cDtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX21vZGFsRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX21vZGFsRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goXG4gICAgICAoaW5wdXQpID0+ICh0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpXG4gICAgKTtcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fbW9kYWxGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2VNb2RhbCgpIHtcbiAgICB0aGlzLl9tb2RhbEZvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZU1vZGFsKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybTtcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlZlbmljZSBCZWFjaFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MTY3NTQwNzUyNjQtNjZkNTJhY2IyM2I2P2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4elpXRnlZMmg4T0h4OGRtVnVhV05sSlRJd1ltVmhZMmg4Wlc1OE1IeDhNSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9NDAwJnE9NjBcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJTYW50YSBNb25pY2FcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjAxMzk0MDI1NzkwLWI5NTUzM2RmMTI0MT9peGxpYj1yYi00LjAuMyZpeGlkPU1ud3hNakEzZkRCOE1IeHpaV0Z5WTJoOE1ueDhjR05vZkdWdWZEQjhmREI4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz00MDAmcT02MFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJEZWNlcHRpb24gUGFzc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2NDM4OTcwMDAxMTQtZDE3Njc0MzExMDg4P2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4elpXRnlZMmg4Tkh4OFpHVmpaWEIwYVc5dUpUSXdjR0Z6YzN4bGJud3dmSHd3Zkh3JTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9NDAwJnE9NjBcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiR3JhbmQgQ2FueW9uIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDU2NDI1NzEyMTkwLTBkZDhjMmIwMDE1Nj9peGxpYj1yYi00LjAuMyZpeGlkPU1ud3hNakEzZkRCOE1IeHpaV0Z5WTJoOE1YeDhaM0poYm1RbE1qQmpZVzU1YjI0bE1qQnVZWFJwYjI1aGJDVXlNSEJoY210OFpXNThNSHg4TUh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTUwMCZxPTYwXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1pYW1pLCBGbG9yaWRhXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUzMzEwNjQ5NzE3Ni00NWFlMTllNjhiYTI/aXhsaWI9cmItNC4wLjMmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh6WldGeVkyaDhOSHg4YldsaGJXbDhaVzU4TUh4OE1IeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz01MDAmcT02MFwiLFxuICB9LFxuXTtcblxuLy8gdmFsaWRhdGlvbiBhY3RpdmF0aW9uXG5leHBvcnQgY29uc3QgZGVmYXVsdEZvcm1Db25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGV0b3I6IFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b24tZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xuICBjYXJkc1NlY3Rpb246IFwiLmNhcmRzX19saXN0XCIsXG4gIGNhcmRUZW1wbGF0ZTogXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICBhZGRNb2RhbDogXCIjbW9kYWxfX2NyZWF0ZVwiLFxuICBlZGl0TW9kYWw6IFwiI21vZGFsX19lZGl0XCIsXG4gIGltYWdlTW9kYWw6IFwiI21vZGFsLWltYWdlXCIsXG4gIGNhcmRNb2RhbEZvcm06IFwiLm1vZGFsX19mb3JtLWNyZWF0ZVwiLFxuICBwcm9maWxlTW9kYWxGb3JtOiBcIi5tb2RhbF9fZm9ybS1lZGl0XCIsXG4gIG1vZGFsU2VsZWN0b3I6IFwiLm1vZGFsXCIsXG4gIHByb2ZpbGVUaXRsZTogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgcHJvZmlsZURlc2NyaXB0aW9uOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZU1vZGFsRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm0tY3JlYXRlXCIpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbmV4cG9ydCBjb25zdCBlZGl0VXNlckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19pbnB1dC1wcm9maWxlLW5hbWVcIlxuKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlSW5wdXREZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19pbnB1dC1wcm9maWxlLWRlc2NyaXB0aW9uXCJcbik7XG5cblxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcblxuaW1wb3J0IHtcbiAgaW5pdGlhbENhcmRzLFxuICBzZWxlY3RvcnMsXG4gIGNyZWF0ZU1vZGFsRm9ybSxcbiAgYWRkQ2FyZEJ1dHRvbixcbiAgZWRpdFVzZXJCdXR0b24sXG4gIHByb2ZpbGVJbnB1dE5hbWUsXG4gIHByb2ZpbGVJbnB1dERlc2NyaXB0aW9uLFxuICBkZWZhdWx0Rm9ybUNvbmZpZyxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5jb25zdCBlZGl0VXNlck1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbF9fZWRpdFwiKTtcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWxfX2NyZWF0ZVwiKTtcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjaW1hZ2UtbW9kYWxcIik7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxuICBzZWxlY3RvcnMucHJvZmlsZVRpdGxlLFxuICBzZWxlY3RvcnMucHJvZmlsZURlc2NyaXB0aW9uXG4pO1xuXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGVkaXRVc2VyTW9kYWwsIGRlZmF1bHRGb3JtQ29uZmlnKTtcbmNvbnN0IGNyZWF0ZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihhZGRDYXJkTW9kYWwsIGRlZmF1bHRGb3JtQ29uZmlnKTtcblxuY29uc3QgcmVuZGVyQ2FyZCA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICB7XG4gICAgICBkYXRhLFxuICAgICAgaGFuZGxlSW1hZ2VDbGljazogKCkgPT4ge1xuICAgICAgICBpbWFnZVBvcHVwLm9wZW4oZGF0YSk7XG4gICAgICB9LFxuICAgIH0sXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiXG4gICk7XG4gIHNlY3Rpb25MaXN0SXRlbXMuYWRkSXRlbShjYXJkLmdlbmVyYXRlQ2FyZCgpKTtcbn07XG5cbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkRm9ybU1vZGFsLm9wZW5Nb2RhbCgpO1xufSk7XG5cbmNvbnN0IGFkZEZvcm1Nb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JzLmFkZE1vZGFsLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgIHJlbmRlckNhcmQoZGF0YSk7XG4gICAgY3JlYXRlTW9kYWxGb3JtLnJlc2V0KCk7XG4gICAgYWRkRm9ybU1vZGFsLmNsb3NlTW9kYWwoKTtcbiAgfSxcbn0pO1xuXG5lZGl0VXNlckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCB7IG5hbWUsIHJvbGUgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVJbnB1dE5hbWUudmFsdWUgPSBuYW1lO1xuICBwcm9maWxlSW5wdXREZXNjcmlwdGlvbi52YWx1ZSA9IHJvbGU7XG4gIGVkaXRGb3JtTW9kYWwub3Blbk1vZGFsKCk7XG59KTtcblxuY29uc3QgZWRpdEZvcm1Nb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JzLmVkaXRNb2RhbCxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcbiAgICBlZGl0Rm9ybU1vZGFsLmNsb3NlTW9kYWwoKTtcbiAgfSxcbn0pO1xuXG5jb25zdCBzZWN0aW9uTGlzdEl0ZW1zID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxuICB9LFxuICBzZWxlY3RvcnMuY2FyZHNTZWN0aW9uXG4pO1xuXG5lZGl0Rm9ybU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5hZGRGb3JtTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuc2VjdGlvbkxpc3RJdGVtcy5yZW5kZXJJdGVtcygpO1xuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuY3JlYXRlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1tb2RhbFwiKTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5faW1hZ2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctaW1hZ2VcIik7XG4gICAgY29uc3QgY2FyZERlc2NyaXB0aW9uID0gdGhpcy5faW1hZ2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XG5cbiAgICBjYXJkSW1hZ2Uuc3JjID0gbGluaztcbiAgICBjYXJkSW1hZ2UuYWx0ID0gbmFtZTtcbiAgICBjYXJkRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW5Nb2RhbCgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcFdpdGhJbWFnZTtcbiIsImNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBkZXNjcmlwdGlvblNlbGVjdG9yKSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvblNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIHJvbGU6IHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIiwiY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZGxlSW1hZ2VDbGljayB9LCBjYXJkU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZFRlbXBsYXRlO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VJY29uID0gKCkgPT5cbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWFjdGl2ZVwiKTtcblxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpKTtcblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VJY29uKCkpO1xuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7XG4gICAgICAgIG5hbWU6IHRoaXMuX25hbWUsXG4gICAgICAgIHNyYzogdGhpcy5fbGluayxcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICBjb25zdCBpbWFnZUVsZW1lbnRUZXh0ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xhYmVsLXRleHRcIik7XG5cbiAgICBpbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcbiAgICBpbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICBpbWFnZUVsZW1lbnRUZXh0LnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oaXRlbSkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJmb3JtRWxlbWVudCIsInNldHRpbmdzIiwiaW5wdXQiLCJlcnJvckVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0aGlzIiwiX3NldHRpbmdzIiwiZXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJfZm9ybUVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsImV2ZXJ5IiwiaXNWYWxpZCIsIl9jaGVja0Zvcm1WYWxpZGl0eSIsImJ1dHRvbiIsInN1Ym1pdEJ1dHRvblNlbGV0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiZW5hYmxlVmFsaWRhdGlvbiIsIkFycmF5IiwiZnJvbSIsImZvcm1TZWxlY3RvciIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJpbnB1dHMiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJzZXRUaW1lb3V0IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInBvcHVwU2VsZWN0b3IiLCJjbG9zZU1vZGFsIiwia2V5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJfcG9wdXBFbGVtZW50Iiwib3Blbk1vZGFsIiwiX2hhbmRsZUVzY2FwZVBvcHVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfbW9kYWxGb3JtIiwiX2lucHV0cyIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiX2Zvcm1WYWx1ZXMiLCJuYW1lIiwidmFsdWUiLCJyZXNldCIsImRlZmF1bHRGb3JtQ29uZmlnIiwiY3JlYXRlTW9kYWxGb3JtIiwiYWRkQ2FyZEJ1dHRvbiIsImVkaXRVc2VyQnV0dG9uIiwicHJvZmlsZUlucHV0TmFtZSIsInByb2ZpbGVJbnB1dERlc2NyaXB0aW9uIiwiZWRpdFVzZXJNb2RhbCIsImFkZENhcmRNb2RhbCIsImltYWdlUG9wdXAiLCJvcGVuIiwibGluayIsIl9pbWFnZUVsZW1lbnQiLCJjYXJkSW1hZ2UiLCJjYXJkRGVzY3JpcHRpb24iLCJzcmMiLCJhbHQiLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImRlc2NyaXB0aW9uU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfZGVzY3JpcHRpb25FbGVtZW50IiwiZ2V0VXNlckluZm8iLCJyb2xlIiwic2V0VXNlckluZm8iLCJkZXNjcmlwdGlvbiIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImNyZWF0ZUZvcm1WYWxpZGF0b3IiLCJyZW5kZXJDYXJkIiwiZGF0YSIsImNhcmQiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX2VsZW1lbnQiLCJ0b2dnbGUiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2hhbmRsZUxpa2VJY29uIiwiZ2VuZXJhdGVDYXJkIiwiaW1hZ2VFbGVtZW50IiwiaW1hZ2VFbGVtZW50VGV4dCIsInNlY3Rpb25MaXN0SXRlbXMiLCJhZGRJdGVtIiwiYWRkRm9ybU1vZGFsIiwiUG9wdXBXaXRoRm9ybSIsImVkaXRGb3JtTW9kYWwiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwicHJlcGVuZCJdLCJzb3VyY2VSb290IjoiIn0=