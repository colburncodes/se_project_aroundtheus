!function(){"use strict";function e(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var r=class{constructor(e,r){t(this,"_showInputError",(e=>{const t=document.querySelector(`.${e.id}-error`);t.textContent=e.validationMessage,t.classList.add(this._settings.errorClass),e.classList.add(this._settings.inputErrorClass)})),t(this,"_hideInputError",(e=>{const t=document.querySelector(`.${e.id}-error`);t.textContent="",e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass)})),t(this,"_checkInputValidity",((e,t)=>{e.validity.valid?this._hideInputError(e,t):this._showInputError(e,t)})),t(this,"_checkFormValidity",(()=>[...this._formElement.querySelectorAll(this._settings.inputSelector)].every((e=>e.validity.valid)))),t(this,"_toggleButtonState",(()=>{const e=this._checkFormValidity(),t=this._formElement.querySelector(this._settings.submitButtonSeletor);e?(t.classList.remove(this._settings.inactiveButtonClass),t.removeAttribute("disabled")):(t.setAttribute("disabled","true"),t.classList.add(this._settings.inactiveButtonClass))})),this._formElement=e,this._settings=r}enableValidation(){Array.from(document.querySelectorAll(this._settings.formSelector)).forEach((e=>{e.addEventListener("submit",(function(e){e.preventDefault()}));const t=[...e.querySelectorAll(this._settings.inputSelector)];this._toggleButtonState(),e.addEventListener("reset",(()=>{setTimeout((()=>{this._toggleButtonState()}),0)})),t.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e,this._settings),this._toggleButtonState()}))}))}))}};function n(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=class{constructor(e){n(this,"_handleCloseButton",(()=>{this.closeModal()})),n(this,"_handleEscapePopup",(e=>{"Escape"===e.key&&this.closeModal()})),n(this,"_handleModalOverlay",(e=>{e.target.classList.contains(".modal")&&this.closeModal()})),this._popupElement=document.querySelector(`${e}`)}openModal(){this._popupElement.classList.add("modal__open"),document.addEventListener("keyup",this._handleEscapePopup)}closeModal(){this._popupElement.classList.remove("modal__open"),document.removeEventListener("keyup",this._handleEscapePopup)}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal__open")&&this.closeModal(),e.target.classList.contains("modal__close")&&this.closeModal()}))}},o=class extends i{constructor(e){let{popupSelector:t,handleFormSubmit:r}=e;super(t),this._modalForm=this._popupElement.querySelector(".modal__form"),this._inputs=this._modalForm.querySelectorAll(".modal__input"),this._handleFormSubmit=r}_getInputValues(){return this._formValues={},this._inputs.forEach((e=>this._formValues[e.name]=e.value)),this._formValues}setEventListeners(){super.setEventListeners(),this._modalForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}closeModal(){this._modalForm.reset(),super.closeModal()}};const s={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSeletor:".modal__save-button",inactiveButtonClass:"modal__button-disabled",inputErrorClass:"modal__input-error",errorClass:"modal__error_visible"},a=document.querySelector(".modal__form-create"),l=document.querySelector(".profile__add-button"),c=document.querySelector(".profile__edit-button"),u=document.querySelector(".modal__input-profile-name"),m=document.querySelector(".modal__input-profile-description"),d=new class{constructor(t){let{baseUrl:r,authToken:n}=t;e(this,"getInitialCards",(async()=>{let e=await fetch(`${this._baseUrl}/cards`,{headers:{authorization:this._authToken}});return e.ok?e.json():Promise.reject(`Error: ${e.status} ${e.statusText}`)})),e(this,"getUserInfo",(async()=>{let e=await fetch(`${this._baseUrl}/users/me`,{headers:{authorization:this._authToken}});return e.ok?e.json():Promise.reject(`Error: ${e.status} ${e.statusText}`)})),e(this,"updateUserProfile",(async e=>{let{name:t,about:r}=e,n=await fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:r})});return n.ok?n.json():Promise.reject(`Error: ${n.status} ${n.statusText}`)})),this._baseUrl=r,this._authToken=n}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",authToken:"db0cb0b5-b0ef-4843-a8af-9c3db60e50cb"}),h=document.querySelector("#modal__edit"),_=document.querySelector("#modal__create"),p=new class extends i{open(e){let{name:t,link:r}=e;this._imageElement=document.querySelector("#image-modal"),super.setEventListeners();const n=this._imageElement.querySelector(".modal__preview-image"),i=this._imageElement.querySelector(".modal__caption");n.src=r,n.alt=t,i.textContent=t,super.openModal()}}("#image-modal"),f=new class{constructor(e,t){this._nameElement=document.querySelector(e),this._descriptionElement=document.querySelector(t)}getUserInfo(){return{name:this._nameElement.textContent,role:this._descriptionElement.textContent}}setUserInfo(e){let{name:t,about:r}=e;this._nameElement.textContent=t,this._descriptionElement.textContent=r}}(".profile__title",".profile__description");d.getUserInfo().then((e=>{f.setUserInfo({name:e.name,about:e.about})})).catch((e=>{console.log(e)}));const b=new r(h,s),v=new r(_,s),y=e=>{const t=new class{constructor(e,t){let{data:r,handleImageClick:n}=e;var i,o,s;i=this,s=()=>this._element.querySelector(".card__like-button").classList.toggle("card__like-active"),(o=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(o="_handleLikeIcon"))in i?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s,this._name=r.name,this._link=r.link,this._cardSelector=t,this._handleImageClick=n}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_handleDeleteCard(){this._element.remove(),this._element=null}_setEventListeners(){this._element.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteCard())),this._element.querySelector(".card__like-button").addEventListener("click",(()=>this._handleLikeIcon())),this._element.querySelector(".card__image").addEventListener("click",(()=>this._handleImageClick({name:this._name,src:this._link})))}generateCard(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".card__image"),t=this._element.querySelector(".card__label-text");return e.src=this._link,e.alt=this._name,t.textContent=this._name,this._element}}({data:e,handleImageClick:()=>{p.open(e)}},"#card-template");E.addItem(t.generateCard())};l.addEventListener("click",(()=>{g.openModal()}));const g=new o({popupSelector:"#modal__create",handleFormSubmit:e=>{y(e),a.reset(),g.closeModal()}});c.addEventListener("click",(()=>{const{name:e,role:t}=f.getUserInfo();u.value=e,m.value=t,S.openModal()}));const S=new o({popupSelector:"#modal__edit",handleFormSubmit:e=>{d.updateUserProfile(e).then((e=>{f.setUserInfo({name:e.name,about:e.about})})),S.closeModal()}}),E=new class{constructor(e,t){let{items:r,renderer:n}=e;this._items=r,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Venice Beach",link:"https://images.unsplash.com/photo-1516754075264-66d52acb23b6?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OHx8dmVuaWNlJTIwYmVhY2h8ZW58MHx8MHx8&auto=format&fit=crop&w=400&q=60"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Santa Monica",link:"https://images.unsplash.com/photo-1601394025790-b95533df1241?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8cGNofGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=400&q=60"},{name:"Deception Pass",link:"https://images.unsplash.com/photo-1643897000114-d17674311088?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8ZGVjZXB0aW9uJTIwcGFzc3xlbnwwfHwwfHw%3D&auto=format&fit=crop&w=400&q=60"},{name:"Grand Canyon National Park",link:"https://images.unsplash.com/photo-1456425712190-0dd8c2b00156?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8Z3JhbmQlMjBjYW55b24lMjBuYXRpb25hbCUyMHBhcmt8ZW58MHx8MHx8&auto=format&fit=crop&w=500&q=60"},{name:"Miami, Florida",link:"https://images.unsplash.com/photo-1533106497176-45ae19e68ba2?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8bWlhbWl8ZW58MHx8MHx8&auto=format&fit=crop&w=500&q=60"}],renderer:y},".cards__list");S.setEventListeners(),g.setEventListeners(),p.setEventListeners(),E.renderItems(),b.enableValidation(),v.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QmpELEVBQUl5RSxrQkFBa0J4QixHQUFNVixNQUFNVSxJQUNoQ2xCLEVBQVNPLFlBQVksQ0FDbkIvQyxLQUFNMEQsRUFBSzFELEtBQ1h5QixNQUFPaUMsRUFBS2pDLE9BQ1osSUFFSndELEVBQWNsRyxZQUFZLElBSXhCOEYsRUFBbUIsSUtsR3pCLE1BQ0UzSSxZQUFZLEVBQXFCaUosR0FBbUIsSUFBeEMsTUFBRUMsRUFBSyxTQUFFQyxHQUFVLEVBQzdCdkksS0FBS3dJLE9BQVNGLEVBQ2R0SSxLQUFLeUksVUFBWUYsRUFDakJ2SSxLQUFLMEksV0FBYWpKLFNBQVNDLGNBQWMySSxFQUMzQyxDQUVBTSxjQUNFM0ksS0FBS3dJLE9BQU9oSCxTQUFTb0gsSUFDbkI1SSxLQUFLeUksVUFBVUcsRUFBSyxHQUV4QixDQUVBWixRQUFRWSxHQUNONUksS0FBSzBJLFdBQVdHLFFBQVFELEVBQzFCLEdMb0ZBLENBQ0VOLE1EcEd3QixDQUMxQixDQUNFcEYsS0FBTSxlQUNOa0MsS0FBTSxpTEFFUixDQUNFbEMsS0FBTSxpQkFDTmtDLEtBQU0sMERBRVIsQ0FDRWxDLEtBQU0sZUFDTmtDLEtBQU0seUtBRVIsQ0FDRWxDLEtBQU0saUJBQ05rQyxLQUFNLHVMQUVSLENBQ0VsQyxLQUFNLDZCQUNOa0MsS0FBTSx5TUFFUixDQUNFbEMsS0FBTSxpQkFDTmtDLEtBQU0sc0tDOEVObUQsU0FBVTVCLEdENURFLGdCQ2lFaEJ3QixFQUFjMUYsb0JBQ2R3RixFQUFheEYsb0JBQ2J5QyxFQUFXekMsb0JBRVhzRixFQUFpQlksY0FDakJuQyxFQUFrQnBGLG1CQUNsQnNGLEVBQW9CdEYsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50LCBzZXR0aW5ncykge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgfTtcblxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcbiAgfTtcblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0LCBzZXR0aW5ncykgPT4ge1xuICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQsIHNldHRpbmdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQsIHNldHRpbmdzKTtcbiAgICB9XG4gIH07XG5cbiAgX2NoZWNrRm9ybVZhbGlkaXR5ID0gKCkgPT4ge1xuICAgIGNvbnN0IGlucHV0TGlzdCA9IFtcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvciksXG4gICAgXTtcbiAgICByZXR1cm4gaW5wdXRMaXN0LmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQpO1xuICB9O1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCBpc1ZhbGlkID0gdGhpcy5fY2hlY2tGb3JtVmFsaWRpdHkoKTtcbiAgICBjb25zdCBidXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZXRvclxuICAgICk7XG4gICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBidXR0b24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfVxuICB9O1xuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5mb3JtU2VsZWN0b3IpXG4gICAgKTtcblxuICAgIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgICBmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGlucHV0cyA9IFtcbiAgICAgICAgLi4uZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKSxcbiAgICAgIF07XG5cbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICBmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKCkgPT4ge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICB9LCAwKTsgLy8gaXTigJlzIGVub3VnaCB0byBwdXQgMCBtcyBoZXJlXG4gICAgICB9KTtcblxuICAgICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0LCB0aGlzLl9zZXR0aW5ncyk7XG4gICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHtwb3B1cFNlbGVjdG9yfWApO1xuICB9XG5cbiAgb3Blbk1vZGFsKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfX29wZW5cIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY2FwZVBvcHVwKTtcbiAgfVxuXG4gIGNsb3NlTW9kYWwoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9fb3BlblwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjYXBlUG9wdXApO1xuICB9XG5cbiAgX2hhbmRsZUNsb3NlQnV0dG9uID0gKCkgPT4ge1xuICAgIHRoaXMuY2xvc2VNb2RhbCgpO1xuICB9O1xuXG4gIF9oYW5kbGVFc2NhcGVQb3B1cCA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYW5kbGVNb2RhbE92ZXJsYXkgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiLm1vZGFsXCIpKSB7XG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX29wZW5cIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7XG4gICAgICB9XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9tb2RhbEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9tb2RhbEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKFxuICAgICAgKGlucHV0KSA9PiAodGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKVxuICAgICk7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX21vZGFsRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlTW9kYWwoKSB7XG4gICAgdGhpcy5fbW9kYWxGb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2VNb2RhbCgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJWZW5pY2UgQmVhY2hcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTE2NzU0MDc1MjY0LTY2ZDUyYWNiMjNiNj9peGxpYj1yYi00LjAuMyZpeGlkPU1ud3hNakEzZkRCOE1IeHpaV0Z5WTJoOE9IeDhkbVZ1YVdObEpUSXdZbVZoWTJoOFpXNThNSHg4TUh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTQwMCZxPTYwXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiU2FudGEgTW9uaWNhXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYwMTM5NDAyNTc5MC1iOTU1MzNkZjEyNDE/aXhsaWI9cmItNC4wLjMmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh6WldGeVkyaDhNbng4Y0dOb2ZHVnVmREI4ZkRCOGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9NDAwJnE9NjBcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiRGVjZXB0aW9uIFBhc3NcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjQzODk3MDAwMTE0LWQxNzY3NDMxMTA4OD9peGxpYj1yYi00LjAuMyZpeGlkPU1ud3hNakEzZkRCOE1IeHpaV0Z5WTJoOE5IeDhaR1ZqWlhCMGFXOXVKVEl3Y0dGemMzeGxibnd3Zkh3d2ZIdyUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTQwMCZxPTYwXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkdyYW5kIENhbnlvbiBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ1NjQyNTcxMjE5MC0wZGQ4YzJiMDAxNTY/aXhsaWI9cmItNC4wLjMmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh6WldGeVkyaDhNWHg4WjNKaGJtUWxNakJqWVc1NWIyNGxNakJ1WVhScGIyNWhiQ1V5TUhCaGNtdDhaVzU4TUh4OE1IeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz01MDAmcT02MFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNaWFtaSwgRmxvcmlkYVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MzMxMDY0OTcxNzYtNDVhZTE5ZTY4YmEyP2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4elpXRnlZMmg4Tkh4OGJXbGhiV2w4Wlc1OE1IeDhNSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9NTAwJnE9NjBcIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCBCQVNFX1VSTCA9IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiO1xuZXhwb3J0IGNvbnN0IEFVVEhfVE9LRU4gPSBcImRiMGNiMGI1LWIwZWYtNDg0My1hOGFmLTljM2RiNjBlNTBjYlwiO1xuXG4vLyB2YWxpZGF0aW9uIGFjdGl2YXRpb25cbmV4cG9ydCBjb25zdCBkZWZhdWx0Rm9ybUNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZXRvcjogXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbi1kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XG4gIGNhcmRzU2VjdGlvbjogXCIuY2FyZHNfX2xpc3RcIixcbiAgY2FyZFRlbXBsYXRlOiBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gIGFkZE1vZGFsOiBcIiNtb2RhbF9fY3JlYXRlXCIsXG4gIGVkaXRNb2RhbDogXCIjbW9kYWxfX2VkaXRcIixcbiAgaW1hZ2VNb2RhbDogXCIjbW9kYWwtaW1hZ2VcIixcbiAgY2FyZE1vZGFsRm9ybTogXCIubW9kYWxfX2Zvcm0tY3JlYXRlXCIsXG4gIHByb2ZpbGVNb2RhbEZvcm06IFwiLm1vZGFsX19mb3JtLWVkaXRcIixcbiAgbW9kYWxTZWxlY3RvcjogXCIubW9kYWxcIixcbiAgcHJvZmlsZVRpdGxlOiBcIi5wcm9maWxlX190aXRsZVwiLFxuICBwcm9maWxlRGVzY3JpcHRpb246IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlTW9kYWxGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybS1jcmVhdGVcIik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcblxuZXhwb3J0IGNvbnN0IGVkaXRVc2VyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlSW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX2lucHV0LXByb2ZpbGUtbmFtZVwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbnB1dERlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX2lucHV0LXByb2ZpbGUtZGVzY3JpcHRpb25cIlxuKTtcblxuXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcblxuaW1wb3J0IHtcbiAgaW5pdGlhbENhcmRzLFxuICBzZWxlY3RvcnMsXG4gIGNyZWF0ZU1vZGFsRm9ybSxcbiAgYWRkQ2FyZEJ1dHRvbixcbiAgZWRpdFVzZXJCdXR0b24sXG4gIHByb2ZpbGVJbnB1dE5hbWUsXG4gIHByb2ZpbGVJbnB1dERlc2NyaXB0aW9uLFxuICBkZWZhdWx0Rm9ybUNvbmZpZyxcbiAgQkFTRV9VUkwsXG4gIEFVVEhfVE9LRU4sXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IEJBU0VfVVJMLFxuICBhdXRoVG9rZW46IEFVVEhfVE9LRU4sXG59KTtcblxuY29uc3QgZWRpdFVzZXJNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWxfX2VkaXRcIik7XG5jb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsX19jcmVhdGVcIik7XG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlLW1vZGFsXCIpO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcbiAgc2VsZWN0b3JzLnByb2ZpbGVUaXRsZSxcbiAgc2VsZWN0b3JzLnByb2ZpbGVEZXNjcmlwdGlvblxuKTtcblxuYXBpXG4gIC5nZXRVc2VySW5mbygpXG4gIC50aGVuKCh1c2VyKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgYWJvdXQ6IHVzZXIuYWJvdXQsXG4gICAgfSk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSk7XG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZWRpdFVzZXJNb2RhbCwgZGVmYXVsdEZvcm1Db25maWcpO1xuY29uc3QgY3JlYXRlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGFkZENhcmRNb2RhbCwgZGVmYXVsdEZvcm1Db25maWcpO1xuXG5jb25zdCByZW5kZXJDYXJkID0gKGRhdGEpID0+IHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIHtcbiAgICAgIGRhdGEsXG4gICAgICBoYW5kbGVJbWFnZUNsaWNrOiAoKSA9PiB7XG4gICAgICAgIGltYWdlUG9wdXAub3BlbihkYXRhKTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCJcbiAgKTtcbiAgc2VjdGlvbkxpc3RJdGVtcy5hZGRJdGVtKGNhcmQuZ2VuZXJhdGVDYXJkKCkpO1xufTtcblxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRGb3JtTW9kYWwub3Blbk1vZGFsKCk7XG59KTtcblxuY29uc3QgYWRkRm9ybU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvcnMuYWRkTW9kYWwsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgcmVuZGVyQ2FyZChkYXRhKTtcbiAgICBjcmVhdGVNb2RhbEZvcm0ucmVzZXQoKTtcbiAgICBhZGRGb3JtTW9kYWwuY2xvc2VNb2RhbCgpO1xuICB9LFxufSk7XG5cbmVkaXRVc2VyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IHsgbmFtZSwgcm9sZSB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZUlucHV0TmFtZS52YWx1ZSA9IG5hbWU7XG4gIHByb2ZpbGVJbnB1dERlc2NyaXB0aW9uLnZhbHVlID0gcm9sZTtcbiAgZWRpdEZvcm1Nb2RhbC5vcGVuTW9kYWwoKTtcbn0pO1xuXG5jb25zdCBlZGl0Rm9ybU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvcnMuZWRpdE1vZGFsLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgIGFwaS51cGRhdGVVc2VyUHJvZmlsZShkYXRhKS50aGVuKChkYXRhKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgYWJvdXQ6IGRhdGEuYWJvdXQsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBlZGl0Rm9ybU1vZGFsLmNsb3NlTW9kYWwoKTtcbiAgfSxcbn0pO1xuXG5jb25zdCBzZWN0aW9uTGlzdEl0ZW1zID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxuICB9LFxuICBzZWxlY3RvcnMuY2FyZHNTZWN0aW9uXG4pO1xuXG5lZGl0Rm9ybU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5hZGRGb3JtTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuc2VjdGlvbkxpc3RJdGVtcy5yZW5kZXJJdGVtcygpO1xuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuY3JlYXRlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4iLCJjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGF1dGhUb2tlbiB9KSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5fYXV0aFRva2VuID0gYXV0aFRva2VuO1xuICB9XG5cbiAgLy8gR0VUOiBMaXN0IG9mIGNhcmRzXG4gIGdldEluaXRpYWxDYXJkcyA9IGFzeW5jICgpID0+IHtcbiAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHsgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuIH0sXG4gICAgfSk7XG4gICAgbGV0IGRhdGEgPSByZXNwb25zZS5va1xuICAgICAgPyByZXNwb25zZS5qc29uKClcbiAgICAgIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgIHJldHVybiBkYXRhO1xuICB9O1xuXG4gIC8vIEdFVDogR2V0cyBVc2VyIFByb2ZpbGVcbiAgZ2V0VXNlckluZm8gPSBhc3luYyAoKSA9PiB7XG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB7IGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbiB9LFxuICAgIH0pO1xuICAgIGxldCBkYXRhID0gcmVzcG9uc2Uub2tcbiAgICAgID8gcmVzcG9uc2UuanNvbigpXG4gICAgICA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICAvLyBQQVRDSDogRWRpdCBVc2VyIFByb2ZpbGVcbiAgdXBkYXRlVXNlclByb2ZpbGUgPSBhc3luYyAoeyBuYW1lLCBhYm91dCB9KSA9PiB7XG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGFib3V0LFxuICAgICAgfSksXG4gICAgfSk7XG4gICAgbGV0IGRhdGEgPSByZXNwb25zZS5va1xuICAgICAgPyByZXNwb25zZS5qc29uKClcbiAgICAgIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgIHJldHVybiBkYXRhO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBBcGk7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1tb2RhbFwiKTtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5faW1hZ2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctaW1hZ2VcIik7XG4gICAgY29uc3QgY2FyZERlc2NyaXB0aW9uID0gdGhpcy5faW1hZ2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XG5cbiAgICBjYXJkSW1hZ2Uuc3JjID0gbGluaztcbiAgICBjYXJkSW1hZ2UuYWx0ID0gbmFtZTtcbiAgICBjYXJkRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW5Nb2RhbCgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcFdpdGhJbWFnZTtcbiIsImNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBkZXNjcmlwdGlvblNlbGVjdG9yKSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvblNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIHJvbGU6IHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGFib3V0O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIiwiY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZGxlSW1hZ2VDbGljayB9LCBjYXJkU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZFRlbXBsYXRlO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VJY29uID0gKCkgPT5cbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWFjdGl2ZVwiKTtcblxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpKTtcblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VJY29uKCkpO1xuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7XG4gICAgICAgIG5hbWU6IHRoaXMuX25hbWUsXG4gICAgICAgIHNyYzogdGhpcy5fbGluayxcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICBjb25zdCBpbWFnZUVsZW1lbnRUZXh0ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xhYmVsLXRleHRcIik7XG5cbiAgICBpbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcbiAgICBpbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICBpbWFnZUVsZW1lbnRUZXh0LnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oaXRlbSkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJmb3JtRWxlbWVudCIsInNldHRpbmdzIiwiaW5wdXQiLCJlcnJvckVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0aGlzIiwiX3NldHRpbmdzIiwiZXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJfZm9ybUVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsImV2ZXJ5IiwiaXNWYWxpZCIsIl9jaGVja0Zvcm1WYWxpZGl0eSIsImJ1dHRvbiIsInN1Ym1pdEJ1dHRvblNlbGV0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiZW5hYmxlVmFsaWRhdGlvbiIsIkFycmF5IiwiZnJvbSIsImZvcm1TZWxlY3RvciIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJpbnB1dHMiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJzZXRUaW1lb3V0IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInBvcHVwU2VsZWN0b3IiLCJjbG9zZU1vZGFsIiwia2V5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJfcG9wdXBFbGVtZW50Iiwib3Blbk1vZGFsIiwiX2hhbmRsZUVzY2FwZVBvcHVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfbW9kYWxGb3JtIiwiX2lucHV0cyIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiX2Zvcm1WYWx1ZXMiLCJuYW1lIiwidmFsdWUiLCJyZXNldCIsImRlZmF1bHRGb3JtQ29uZmlnIiwiY3JlYXRlTW9kYWxGb3JtIiwiYWRkQ2FyZEJ1dHRvbiIsImVkaXRVc2VyQnV0dG9uIiwicHJvZmlsZUlucHV0TmFtZSIsInByb2ZpbGVJbnB1dERlc2NyaXB0aW9uIiwiYXBpIiwiYmFzZVVybCIsImF1dGhUb2tlbiIsImFzeW5jIiwicmVzcG9uc2UiLCJmZXRjaCIsIl9iYXNlVXJsIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJfYXV0aFRva2VuIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZWRpdFVzZXJNb2RhbCIsImFkZENhcmRNb2RhbCIsImltYWdlUG9wdXAiLCJvcGVuIiwibGluayIsIl9pbWFnZUVsZW1lbnQiLCJjYXJkSW1hZ2UiLCJjYXJkRGVzY3JpcHRpb24iLCJzcmMiLCJhbHQiLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImRlc2NyaXB0aW9uU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfZGVzY3JpcHRpb25FbGVtZW50IiwiZ2V0VXNlckluZm8iLCJyb2xlIiwic2V0VXNlckluZm8iLCJ0aGVuIiwidXNlciIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImNyZWF0ZUZvcm1WYWxpZGF0b3IiLCJyZW5kZXJDYXJkIiwiZGF0YSIsImNhcmQiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX2VsZW1lbnQiLCJ0b2dnbGUiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2hhbmRsZUxpa2VJY29uIiwiZ2VuZXJhdGVDYXJkIiwiaW1hZ2VFbGVtZW50IiwiaW1hZ2VFbGVtZW50VGV4dCIsInNlY3Rpb25MaXN0SXRlbXMiLCJhZGRJdGVtIiwiYWRkRm9ybU1vZGFsIiwiUG9wdXBXaXRoRm9ybSIsImVkaXRGb3JtTW9kYWwiLCJ1cGRhdGVVc2VyUHJvZmlsZSIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJwcmVwZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==