!function(){"use strict";function e(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var r=class{constructor(e,r){t(this,"_showInputError",(e=>{const t=document.querySelector(`.${e.id}-error`);t.textContent=e.validationMessage,t.classList.add(this._settings.errorClass),e.classList.add(this._settings.inputErrorClass)})),t(this,"_hideInputError",(e=>{const t=document.querySelector(`.${e.id}-error`);t.textContent="",e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass)})),t(this,"_checkInputValidity",((e,t)=>{e.validity.valid?this._hideInputError(e,t):this._showInputError(e,t)})),t(this,"_checkFormValidity",(()=>[...this._formElement.querySelectorAll(this._settings.inputSelector)].every((e=>e.validity.valid)))),t(this,"_toggleButtonState",(()=>{const e=this._checkFormValidity(),t=this._formElement.querySelector(this._settings.submitButtonSeletor);e?(t.classList.remove(this._settings.inactiveButtonClass),t.removeAttribute("disabled")):(t.setAttribute("disabled","true"),t.classList.add(this._settings.inactiveButtonClass))})),this._formElement=e,this._settings=r}enableValidation(){Array.from(document.querySelectorAll(this._settings.formSelector)).forEach((e=>{e.addEventListener("submit",(function(e){e.preventDefault()}));const t=[...e.querySelectorAll(this._settings.inputSelector)];this._toggleButtonState(),e.addEventListener("reset",(()=>{setTimeout((()=>{this._toggleButtonState()}),0)})),t.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e,this._settings),this._toggleButtonState()}))}))}))}};function n(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=class{constructor(e){n(this,"_handleCloseButton",(()=>{this.closeModal()})),n(this,"_handleEscapePopup",(e=>{"Escape"===e.key&&this.closeModal()})),n(this,"_handleModalOverlay",(e=>{e.target.classList.contains(".modal")&&this.closeModal()})),this._popupElement=document.querySelector(`${e}`)}openModal(){this._popupElement.classList.add("modal__open"),document.addEventListener("keyup",this._handleEscapePopup)}closeModal(){this._popupElement.classList.remove("modal__open"),document.removeEventListener("keyup",this._handleEscapePopup)}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal__open")&&this.closeModal(),e.target.classList.contains("modal__close")&&this.closeModal()}))}},s=class extends o{constructor(e){let{popupSelector:t,handleFormSubmit:r}=e;super(t),this._modalForm=this._popupElement.querySelector(".modal__form"),this._inputs=this._modalForm.querySelectorAll(".modal__input"),this._handleFormSubmit=r}_getInputValues(){return this._formValues={},this._inputs.forEach((e=>this._formValues[e.name]=e.value)),this._formValues}setEventListeners(){super.setEventListeners(),this._modalForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}closeModal(){this._modalForm.reset(),super.closeModal()}};const i={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSeletor:".modal__save-button",inactiveButtonClass:"modal__button-disabled",inputErrorClass:"modal__input-error",errorClass:"modal__error_visible"},a=document.querySelector(".modal__form-create"),l=document.querySelector(".profile__add-button"),c=document.querySelector(".profile__edit-button"),u=document.querySelector(".modal__input-profile-name"),d=document.querySelector(".modal__input-profile-description"),m=new class{constructor(t){let{baseUrl:r,authToken:n}=t;e(this,"getInitialCards",(async()=>{let e=await fetch(`${this._baseUrl}/cards`,{headers:{authorization:this._authToken}});return e.ok?e.json():Promise.reject(`Error: ${e.status} ${e.statusText}`)})),e(this,"addCard",(async e=>{let{name:t,link:r}=e,n=await fetch(`${this._baseUrl}/cards`,{method:"POST",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:r})});return n.ok?n.json():Promise.reject(`Error: ${n.status} ${n.statusText}`)})),e(this,"deleteCardById",(async e=>{let t=await fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({id:e})});return t.ok?t.json():Promise.reject(`Error: ${t.status} ${t.statusText}`)})),e(this,"getUserInfo",(async()=>{let e=await fetch(`${this._baseUrl}/users/me`,{headers:{authorization:this._authToken}});return e.ok?e.json():Promise.reject(`Error: ${e.status} ${e.statusText}`)})),e(this,"editUserInfo",(async e=>{let{name:t,about:r}=e,n=await fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:r})});return n.ok?n.json():Promise.reject(`Error: ${n.status} ${n.statusText}`)})),this._baseUrl=r,this._authToken=n}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",authToken:"db0cb0b5-b0ef-4843-a8af-9c3db60e50cb"}),h=document.querySelector("#modal__edit"),_=document.querySelector("#modal__create"),p=new class extends o{open(e){let{name:t,link:r}=e;this._imageElement=document.querySelector("#image-modal"),super.setEventListeners();const n=this._imageElement.querySelector(".modal__preview-image"),o=this._imageElement.querySelector(".modal__caption");n.src=r,n.alt=t,o.textContent=t,super.openModal()}}("#image-modal"),f=new class{constructor(e,t){this._nameElement=document.querySelector(e),this._descriptionElement=document.querySelector(t)}getUserInfo(){return{name:this._nameElement.textContent,role:this._descriptionElement.textContent}}setUserInfo(e){let{name:t,about:r}=e;this._nameElement.textContent=t,this._descriptionElement.textContent=r}}(".profile__title",".profile__description");m.getUserInfo().then((e=>{f.setUserInfo({name:e.name,about:e.about})})).catch((e=>{console.error(e)}));const v=new r(h,i),y=new r(_,i);l.addEventListener("click",(()=>{b.openModal()}));const b=new s({popupSelector:"#modal__create",handleFormSubmit:e=>{m.addCard(e).then((e=>e)).catch((e=>{console.error(e)})),a.reset(),b.closeModal()}});c.addEventListener("click",(()=>{const{name:e,role:t}=f.getUserInfo();u.value=e,d.value=t,g.openModal()}));const g=new s({popupSelector:"#modal__edit",handleFormSubmit:e=>{m.editUserInfo(e).then((e=>{f.setUserInfo({name:e.name,about:e.about})})).catch((e=>{console.error(e)})),g.closeModal()}});m.getInitialCards().then((e=>{const t=new class{constructor(e,t){let{items:r,renderer:n}=e;this._items=r,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:e,renderer:()=>{e.forEach((e=>{const r=new class{constructor(e,t){let{data:r,handleImageClick:n}=e;var o,s,i;o=this,i=()=>this._element.querySelector(".card__like-button").classList.toggle("card__like-active"),(s=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(s="_handleLikeIcon"))in o?Object.defineProperty(o,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[s]=i,this._name=r.name,this._link=r.link,this._cardSelector=t,this._handleImageClick=n}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_handleDeleteCard(){this._element.remove(),this._element=null}_setEventListeners(){this._element.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteCard())),this._element.querySelector(".card__like-button").addEventListener("click",(()=>this._handleLikeIcon())),this._element.querySelector(".card__image").addEventListener("click",(()=>this._handleImageClick({name:this._name,src:this._link})))}generateCard(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".card__image"),t=this._element.querySelector(".card__label-text");return e.src=this._link,e.alt=this._name,t.textContent=this._name,this._element}}({data:e,handleImageClick:()=>{p.open(e)}},"#card-template");t.addItem(r.generateCard())}))}},".cards__list");t.renderItems()})).catch((e=>{console.error(e)})),g.setEventListeners(),b.setEventListeners(),p.setEventListeners(),v.enableValidation(),y.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bUksTUFDeEJZLEVBQWlCbkosWUFBY0ksS0FBS21JLE1BRTdCbkksS0FBS2lJLFFBQ2QsR0x1RFksQ0FDRXBCLE9BQ0FtQixpQkFBa0IsS0FDaEI3QyxFQUFXQyxLQUFLeUIsRUFBSyxHQUd6QixrQkFFRk0sRUFBaUJTLFFBQVFFLEVBQUtlLGVBQWUsR0FDN0MsR0R6R0ksZ0JDOEdaMUIsRUFBaUJPLGFBQWEsSUFFL0J0QixPQUFPQyxJQUNOQyxRQUFRQyxNQUFNRixFQUFJLElBR3RCVSxFQUFjdEUsb0JBQ2RrRSxFQUFhbEUsb0JBQ2IwQyxFQUFXMUMsb0JBRVgrRCxFQUFrQnBGLG1CQUNsQnNGLEVBQW9CdEYsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50LCBzZXR0aW5ncykge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dCkgPT4ge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgfTtcblxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcbiAgfTtcblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0LCBzZXR0aW5ncykgPT4ge1xuICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQsIHNldHRpbmdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQsIHNldHRpbmdzKTtcbiAgICB9XG4gIH07XG5cbiAgX2NoZWNrRm9ybVZhbGlkaXR5ID0gKCkgPT4ge1xuICAgIGNvbnN0IGlucHV0TGlzdCA9IFtcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvciksXG4gICAgXTtcbiAgICByZXR1cm4gaW5wdXRMaXN0LmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQpO1xuICB9O1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCBpc1ZhbGlkID0gdGhpcy5fY2hlY2tGb3JtVmFsaWRpdHkoKTtcbiAgICBjb25zdCBidXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZXRvclxuICAgICk7XG4gICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBidXR0b24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfVxuICB9O1xuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5mb3JtU2VsZWN0b3IpXG4gICAgKTtcblxuICAgIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgICBmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGlucHV0cyA9IFtcbiAgICAgICAgLi4uZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKSxcbiAgICAgIF07XG5cbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICBmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKCkgPT4ge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICB9LCAwKTsgLy8gaXTigJlzIGVub3VnaCB0byBwdXQgMCBtcyBoZXJlXG4gICAgICB9KTtcblxuICAgICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0LCB0aGlzLl9zZXR0aW5ncyk7XG4gICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHtwb3B1cFNlbGVjdG9yfWApO1xuICB9XG5cbiAgb3Blbk1vZGFsKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfX29wZW5cIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY2FwZVBvcHVwKTtcbiAgfVxuXG4gIGNsb3NlTW9kYWwoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9fb3BlblwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjYXBlUG9wdXApO1xuICB9XG5cbiAgX2hhbmRsZUNsb3NlQnV0dG9uID0gKCkgPT4ge1xuICAgIHRoaXMuY2xvc2VNb2RhbCgpO1xuICB9O1xuXG4gIF9oYW5kbGVFc2NhcGVQb3B1cCA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYW5kbGVNb2RhbE92ZXJsYXkgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiLm1vZGFsXCIpKSB7XG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX29wZW5cIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7XG4gICAgICB9XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9tb2RhbEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9tb2RhbEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKFxuICAgICAgKGlucHV0KSA9PiAodGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKVxuICAgICk7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX21vZGFsRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlTW9kYWwoKSB7XG4gICAgdGhpcy5fbW9kYWxGb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2VNb2RhbCgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XG4iLCJleHBvcnQgY29uc3QgQkFTRV9VUkwgPSBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIjtcbmV4cG9ydCBjb25zdCBBVVRIX1RPS0VOID0gXCJkYjBjYjBiNS1iMGVmLTQ4NDMtYThhZi05YzNkYjYwZTUwY2JcIjtcblxuLy8gdmFsaWRhdGlvbiBhY3RpdmF0aW9uXG5leHBvcnQgY29uc3QgZGVmYXVsdEZvcm1Db25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGV0b3I6IFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b24tZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xuICBjYXJkc1NlY3Rpb246IFwiLmNhcmRzX19saXN0XCIsXG4gIGNhcmRUZW1wbGF0ZTogXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICBhZGRNb2RhbDogXCIjbW9kYWxfX2NyZWF0ZVwiLFxuICBlZGl0TW9kYWw6IFwiI21vZGFsX19lZGl0XCIsXG4gIGltYWdlTW9kYWw6IFwiI21vZGFsLWltYWdlXCIsXG4gIGNhcmRNb2RhbEZvcm06IFwiLm1vZGFsX19mb3JtLWNyZWF0ZVwiLFxuICBwcm9maWxlTW9kYWxGb3JtOiBcIi5tb2RhbF9fZm9ybS1lZGl0XCIsXG4gIG1vZGFsU2VsZWN0b3I6IFwiLm1vZGFsXCIsXG4gIHByb2ZpbGVUaXRsZTogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgcHJvZmlsZURlc2NyaXB0aW9uOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZU1vZGFsRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm0tY3JlYXRlXCIpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbmV4cG9ydCBjb25zdCBlZGl0VXNlckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19pbnB1dC1wcm9maWxlLW5hbWVcIlxuKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlSW5wdXREZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19pbnB1dC1wcm9maWxlLWRlc2NyaXB0aW9uXCJcbik7XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcblxuaW1wb3J0IHtcbiAgc2VsZWN0b3JzLFxuICBjcmVhdGVNb2RhbEZvcm0sXG4gIGFkZENhcmRCdXR0b24sXG4gIGVkaXRVc2VyQnV0dG9uLFxuICBwcm9maWxlSW5wdXROYW1lLFxuICBwcm9maWxlSW5wdXREZXNjcmlwdGlvbixcbiAgZGVmYXVsdEZvcm1Db25maWcsXG4gIEJBU0VfVVJMLFxuICBBVVRIX1RPS0VOLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBCQVNFX1VSTCxcbiAgYXV0aFRva2VuOiBBVVRIX1RPS0VOLFxufSk7XG5cbmNvbnN0IGVkaXRVc2VyTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsX19lZGl0XCIpO1xuY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbF9fY3JlYXRlXCIpO1xuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNpbWFnZS1tb2RhbFwiKTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXG4gIHNlbGVjdG9ycy5wcm9maWxlVGl0bGUsXG4gIHNlbGVjdG9ycy5wcm9maWxlRGVzY3JpcHRpb25cbik7XG5cbmFwaVxuICAuZ2V0VXNlckluZm8oKVxuICAudGhlbigodXNlcikgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgIGFib3V0OiB1c2VyLmFib3V0LFxuICAgIH0pO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgfSk7XG5cbi8vIGFwaVxuLy8gICAuZGVsZXRlQ2FyZEJ5SWQoXCI2MzlmMjI1MjVkZDIxMDFmMTQ2ZTRkMWJcIilcbi8vICAgLnRoZW4oKGNhcmQpID0+IGNvbnNvbGUubG9nKGNhcmQpKVxuLy8gICAuY2F0Y2goKGVycikgPT4ge1xuLy8gICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbi8vICAgfSk7XG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZWRpdFVzZXJNb2RhbCwgZGVmYXVsdEZvcm1Db25maWcpO1xuY29uc3QgY3JlYXRlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGFkZENhcmRNb2RhbCwgZGVmYXVsdEZvcm1Db25maWcpO1xuXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZEZvcm1Nb2RhbC5vcGVuTW9kYWwoKTtcbn0pO1xuXG5jb25zdCBhZGRGb3JtTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9ycy5hZGRNb2RhbCxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICBhcGlcbiAgICAgIC5hZGRDYXJkKGRhdGEpXG4gICAgICAudGhlbigoZGF0YSkgPT4gZGF0YSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pO1xuICAgIGNyZWF0ZU1vZGFsRm9ybS5yZXNldCgpO1xuICAgIGFkZEZvcm1Nb2RhbC5jbG9zZU1vZGFsKCk7XG4gIH0sXG59KTtcblxuZWRpdFVzZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgeyBuYW1lLCByb2xlIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlSW5wdXROYW1lLnZhbHVlID0gbmFtZTtcbiAgcHJvZmlsZUlucHV0RGVzY3JpcHRpb24udmFsdWUgPSByb2xlO1xuICBlZGl0Rm9ybU1vZGFsLm9wZW5Nb2RhbCgpO1xufSk7XG5cbmNvbnN0IGVkaXRGb3JtTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9ycy5lZGl0TW9kYWwsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgYXBpXG4gICAgICAuZWRpdFVzZXJJbmZvKGRhdGEpXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICAgIGFib3V0OiBkYXRhLmFib3V0LFxuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgICBlZGl0Rm9ybU1vZGFsLmNsb3NlTW9kYWwoKTtcbiAgfSxcbn0pO1xuXG5hcGlcbiAgLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKChjYXJkcykgPT4ge1xuICAgIGNvbnN0IHNlY3Rpb25MaXN0SXRlbXMgPSBuZXcgU2VjdGlvbihcbiAgICAgIHtcbiAgICAgICAgaXRlbXM6IGNhcmRzLFxuICAgICAgICByZW5kZXJlcjogKCkgPT4ge1xuICAgICAgICAgIGNhcmRzLmZvckVhY2goKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgaGFuZGxlSW1hZ2VDbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgaW1hZ2VQb3B1cC5vcGVuKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFwiI2NhcmQtdGVtcGxhdGVcIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHNlY3Rpb25MaXN0SXRlbXMuYWRkSXRlbShjYXJkLmdlbmVyYXRlQ2FyZCgpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBzZWxlY3RvcnMuY2FyZHNTZWN0aW9uXG4gICAgKTtcbiAgICBzZWN0aW9uTGlzdEl0ZW1zLnJlbmRlckl0ZW1zKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KTtcblxuZWRpdEZvcm1Nb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuYWRkRm9ybU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmNyZWF0ZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuIiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBhdXRoVG9rZW4gfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2F1dGhUb2tlbiA9IGF1dGhUb2tlbjtcbiAgfVxuXG4gIC8vIEdFVDogTGlzdCBvZiBjYXJkc1xuICBnZXRJbml0aWFsQ2FyZHMgPSBhc3luYyAoKSA9PiB7XG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB7IGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbiB9LFxuICAgIH0pO1xuICAgIGxldCBkYXRhID0gcmVzcG9uc2Uub2tcbiAgICAgID8gcmVzcG9uc2UuanNvbigpXG4gICAgICA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICAvLyBQT1NUOiBBZGQgbmV3IGNhcmRcbiAgYWRkQ2FyZCA9IGFzeW5jICh7IG5hbWUsIGxpbmsgfSkgPT4ge1xuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxpbmssXG4gICAgICB9KSxcbiAgICB9KTtcblxuICAgIGxldCBkYXRhID0gcmVzcG9uc2Uub2tcbiAgICAgID8gcmVzcG9uc2UuanNvbigpXG4gICAgICA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICAvLyBERUxFVEU6IERlbGV0ZSBjYXJkXG4gIGRlbGV0ZUNhcmRCeUlkID0gYXN5bmMgKGlkKSA9PiB7XG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZCxcbiAgICAgIH0pLFxuICAgIH0pO1xuXG4gICAgbGV0IGRhdGEgPSByZXNwb25zZS5va1xuICAgICAgPyByZXNwb25zZS5qc29uKClcbiAgICAgIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgIHJldHVybiBkYXRhO1xuICB9O1xuXG4gIC8vIEdFVDogR2V0cyBVc2VyIFByb2ZpbGVcbiAgZ2V0VXNlckluZm8gPSBhc3luYyAoKSA9PiB7XG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB7IGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbiB9LFxuICAgIH0pO1xuICAgIGxldCBkYXRhID0gcmVzcG9uc2Uub2tcbiAgICAgID8gcmVzcG9uc2UuanNvbigpXG4gICAgICA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICAvLyBQQVRDSDogRWRpdCBVc2VyIFByb2ZpbGVcbiAgZWRpdFVzZXJJbmZvID0gYXN5bmMgKHsgbmFtZSwgYWJvdXQgfSkgPT4ge1xuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBhYm91dCxcbiAgICAgIH0pLFxuICAgIH0pO1xuICAgIGxldCBkYXRhID0gcmVzcG9uc2Uub2tcbiAgICAgID8gcmVzcG9uc2UuanNvbigpXG4gICAgICA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtbW9kYWxcIik7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2ltYWdlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3LWltYWdlXCIpO1xuICAgIGNvbnN0IGNhcmREZXNjcmlwdGlvbiA9IHRoaXMuX2ltYWdlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuXG4gICAgY2FyZEltYWdlLnNyYyA9IGxpbms7XG4gICAgY2FyZEltYWdlLmFsdCA9IG5hbWU7XG4gICAgY2FyZERlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuTW9kYWwoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3BXaXRoSW1hZ2U7XG4iLCJjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3RvciwgZGVzY3JpcHRpb25TZWxlY3Rvcikge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICByb2xlOiB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbztcbiIsImNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShpdGVtKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiIsImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIGhhbmRsZUltYWdlQ2xpY2sgfSwgY2FyZFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgcmV0dXJuIGNhcmRUZW1wbGF0ZTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlSWNvbiA9ICgpID0+XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1hY3RpdmVcIik7XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQoKSk7XG5cbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlSWNvbigpKTtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soe1xuICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLFxuICAgICAgICBzcmM6IHRoaXMuX2xpbmssXG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBjb25zdCBpbWFnZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgY29uc3QgaW1hZ2VFbGVtZW50VGV4dCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19sYWJlbC10ZXh0XCIpO1xuXG4gICAgaW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XG4gICAgaW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuX25hbWU7XG4gICAgaW1hZ2VFbGVtZW50VGV4dC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwiZm9ybUVsZW1lbnQiLCJzZXR0aW5ncyIsImlucHV0IiwiZXJyb3JFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiY2xhc3NMaXN0IiwiYWRkIiwidGhpcyIsIl9zZXR0aW5ncyIsImVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJyZW1vdmUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2Zvcm1FbGVtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJldmVyeSIsImlzVmFsaWQiLCJfY2hlY2tGb3JtVmFsaWRpdHkiLCJidXR0b24iLCJzdWJtaXRCdXR0b25TZWxldG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImVuYWJsZVZhbGlkYXRpb24iLCJBcnJheSIsImZyb20iLCJmb3JtU2VsZWN0b3IiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiaW5wdXRzIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwic2V0VGltZW91dCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJwb3B1cFNlbGVjdG9yIiwiY2xvc2VNb2RhbCIsImtleSIsInRhcmdldCIsImNvbnRhaW5zIiwiX3BvcHVwRWxlbWVudCIsIm9wZW5Nb2RhbCIsIl9oYW5kbGVFc2NhcGVQb3B1cCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX21vZGFsRm9ybSIsIl9pbnB1dHMiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9mb3JtVmFsdWVzIiwibmFtZSIsInZhbHVlIiwicmVzZXQiLCJkZWZhdWx0Rm9ybUNvbmZpZyIsImNyZWF0ZU1vZGFsRm9ybSIsImFkZENhcmRCdXR0b24iLCJlZGl0VXNlckJ1dHRvbiIsInByb2ZpbGVJbnB1dE5hbWUiLCJwcm9maWxlSW5wdXREZXNjcmlwdGlvbiIsImFwaSIsImJhc2VVcmwiLCJhdXRoVG9rZW4iLCJhc3luYyIsInJlc3BvbnNlIiwiZmV0Y2giLCJfYmFzZVVybCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwiX2F1dGhUb2tlbiIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwibGluayIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJlZGl0VXNlck1vZGFsIiwiYWRkQ2FyZE1vZGFsIiwiaW1hZ2VQb3B1cCIsIm9wZW4iLCJfaW1hZ2VFbGVtZW50IiwiY2FyZEltYWdlIiwiY2FyZERlc2NyaXB0aW9uIiwic3JjIiwiYWx0IiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2Rlc2NyaXB0aW9uRWxlbWVudCIsImdldFVzZXJJbmZvIiwicm9sZSIsInNldFVzZXJJbmZvIiwidGhlbiIsInVzZXIiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImNyZWF0ZUZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtTW9kYWwiLCJQb3B1cFdpdGhGb3JtIiwiZGF0YSIsImFkZENhcmQiLCJlZGl0Rm9ybU1vZGFsIiwiZWRpdFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwiY2FyZHMiLCJzZWN0aW9uTGlzdEl0ZW1zIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJwcmVwZW5kIiwiY2FyZCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJfZWxlbWVudCIsInRvZ2dsZSIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfZ2V0VGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfaGFuZGxlTGlrZUljb24iLCJnZW5lcmF0ZUNhcmQiLCJpbWFnZUVsZW1lbnQiLCJpbWFnZUVsZW1lbnRUZXh0Il0sInNvdXJjZVJvb3QiOiIifQ==